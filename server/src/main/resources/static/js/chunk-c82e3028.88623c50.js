(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c82e3028"],{"0fea":function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"b",function(){return s}),n.d(t,"a",function(){return c});var r=n("b775"),a={user:"/user",role:"/role",service:"/service",permission:"/permission",permissionNoPager:"/permission/no-pager",orgTree:"/org/tree"};function o(e){return Object(r["b"])({url:a.role,method:"get",params:e})}function i(e){return Object(r["b"])({url:a.service,method:"get",params:e})}function s(e){return Object(r["b"])({url:a.permissionNoPager,method:"get",params:e})}function c(e){return Object(r["b"])({url:a.orgTree,method:"get",params:e})}},5426:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{attrs:{bordered:!1}},[n("a-row",{attrs:{gutter:8}},[n("a-col",{attrs:{span:5}},[n("s-tree",{attrs:{dataSource:e.orgTree,openKeys:e.openKeys,search:!0},on:{"update:openKeys":function(t){e.openKeys=t},click:e.handleClick,add:e.handleAdd,titleClick:e.handleTitleClick}})],1),n("a-col",{attrs:{span:19}},[n("s-table",{ref:"table",attrs:{size:"default",columns:e.columns,data:e.loadData,alert:!1,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},scopedSlots:e._u([{key:"action",fn:function(t,r){return n("span",{},[e.$auth("table.update")?[n("a",{on:{click:function(t){e.handleEdit(r)}}},[e._v("编辑")]),n("a-divider",{attrs:{type:"vertical"}})]:e._e(),n("a-dropdown",[n("a",{staticClass:"ant-dropdown-link"},[e._v("\n              更多 "),n("a-icon",{attrs:{type:"down"}})],1),n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",[n("a",{attrs:{href:"javascript:;"}},[e._v("详情")])]),e.$auth("table.disable")?n("a-menu-item",[n("a",{attrs:{href:"javascript:;"}},[e._v("禁用")])]):e._e(),e.$auth("table.delete")?n("a-menu-item",[n("a",{attrs:{href:"javascript:;"}},[e._v("删除")])]):e._e()],1)],1)],2)}}])})],1)],1),n("org-modal",{ref:"modal",on:{ok:e.handleSaveOk,close:e.handleSaveClose}})],1)},a=[],o=n("24b4");function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){s(e,t,n[t])})}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=o["Menu"].Item,l=o["Menu"].ItemGroup,u=o["Menu"].SubMenu,d=o["Input"].Search,f={name:"Tree",props:{dataSource:{type:Array,required:!0},openKeys:{type:Array,default:function(){return[]}},search:{type:Boolean,default:!1}},created:function(){this.localOpenKeys=this.openKeys.slice(0)},data:function(){return{localOpenKeys:[]}},methods:{handlePlus:function(e){this.$emit("add",e)},handleTitleClick:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.$emit("titleClick",{args:t})},renderSearch:function(){var e=this.$createElement;return e(d,{attrs:{placeholder:"input search text"},style:"width: 100%; margin-bottom: 1rem"})},renderIcon:function(e){var t=this.$createElement;return e&&t(o["Icon"],{attrs:{type:e}})||null},renderMenuItem:function(e){var t=this,n=this.$createElement;return n(c,{key:e.key},[this.renderIcon(e.icon),e.title,n("a",{class:"btn",style:"width: 20px;z-index:1300",on:i({},{click:function(){return t.handlePlus(e)}})},[n("a-icon",{attrs:{type:"plus"}})])])},renderItem:function(e){return e.children?this.renderSubItem(e,e.key):this.renderMenuItem(e,e.key)},renderItemGroup:function(e){var t=this,n=this.$createElement,r=e.children.map(function(e){return t.renderItem(e,e.key)});return n(l,{key:e.key},[n("template",{slot:"title"},[n("span",[e.title]),n("a-dropdown",[n("a",{class:"btn"},[n("a-icon",{attrs:{type:"ellipsis"}})]),n("a-menu",{slot:"overlay"},[n("a-menu-item",{key:"1"},["新增"]),n("a-menu-item",{key:"2"},["合并"]),n("a-menu-item",{key:"3"},["移除"])])])]),r])},renderSubItem:function(e,t){var n=this,r=this.$createElement,a=e.children&&e.children.map(function(e){return n.renderItem(e,e.key)}),o=r("span",{slot:"title"},[this.renderIcon(e.icon),r("span",[e.title])]);return e.group?this.renderItemGroup(e):r(u,{key:t},[o,a])}},render:function(){var e=this,t=arguments[0],n=this.$props,r=n.dataSource,a=n.search,s=r.map(function(t){return e.renderItem(t)});return t("div",{class:"tree-wrapper"},[a?this.renderSearch():null,t(o["Menu"],{attrs:{mode:"inline",openKeys:this.localOpenKeys},class:"custom-tree",on:i({},{click:function(t){return e.$emit("click",t)},"update:openKeys":function(t){e.localOpenKeys=t}})},[s])])}},m=n("e8c4"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{attrs:{title:"操作",width:600,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleOk,cancel:e.handleCancel}},[n("a-spin",{attrs:{spinning:e.confirmLoading}},[n("a-form",{attrs:{form:e.form}},[n("a-form-item",{attrs:{label:"父级ID"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentId",{}],expression:"['parentId', {}]"}],attrs:{disabled:""}})],1),n("a-form-item",{attrs:{label:"机构名称"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["orgName",{}],expression:"['orgName', {}]"}]})],1)],1)],1)],1)},p=[];function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){b(e,t,n[t])})}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v={name:"OrgModal",data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},visible:!1,confirmLoading:!1,mdl:{}}},beforeCreate:function(){this.form=this.$form.createForm(this),console.log("form::",this.form)},created:function(){},methods:{add:function(e){this.edit({parentId:e})},edit:function(e){var t=this;this.mdl=Object.assign({},e),this.visible=!0,this.$nextTick(function(){t.form.setFieldsValue(y({},e))})},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this;this.form.validateFields(function(t,n){t||(console.log("form values",n),e.confirmLoading=!0,new Promise(function(e){setTimeout(function(){return e()},2e3)}).then(function(){e.$message.success("保存成功"),e.$emit("ok")}).catch(function(){}).finally(function(){e.confirmLoading=!1,e.close()}))})},handleCancel:function(){this.close()}}},g=v,k=n("2877"),w=Object(k["a"])(g,h,p,!1,null,null,null),O=w.exports,I=n("0fea"),S={name:"TreeList",components:{STable:m["a"],STree:f,OrgModal:O},data:function(){var e=this;return{openKeys:["key-01"],queryParam:{},columns:[{title:"#",dataIndex:"no"},{title:"成员名称",dataIndex:"description"},{title:"登陆次数",dataIndex:"callNo",sorter:!0,needTotal:!0,customRender:function(e){return e+" 次"}},{title:"状态",dataIndex:"status",needTotal:!0},{title:"更新时间",dataIndex:"updatedAt",sorter:!0},{table:"操作",dataIndex:"action",width:"150px",scopedSlots:{customRender:"action"}}],loadData:function(t){return Object(I["d"])(Object.assign(t,e.queryParam)).then(function(e){return e.result})},orgTree:[],selectedRowKeys:[],selectedRows:[]}},created:function(){var e=this;Object(I["a"])().then(function(t){e.orgTree=t.result})},methods:{handleClick:function(e){console.log("handleClick",e),this.queryParam={key:e.key},this.$refs.table.refresh(!0)},handleAdd:function(e){console.log("add button, item",e),this.$message.info("提示：你点了 ".concat(e.key," - ").concat(e.title," ")),this.$refs.modal.add(e.key)},handleTitleClick:function(e){console.log("handleTitleClick",e)},titleClick:function(e){console.log("titleClick",e)},handleSaveOk:function(){},handleSaveClose:function(){},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t}}},j=S,C=(n("85a8"),Object(k["a"])(j,r,a,!1,null,null,null));t["default"]=C.exports},"6a48":function(e,t,n){},"85a8":function(e,t,n){"use strict";var r=n("6a48"),a=n.n(r);a.a}}]);
//# sourceMappingURL=chunk-c82e3028.88623c50.js.map